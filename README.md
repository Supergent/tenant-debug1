# Simple Todo App

An ultrasimple, production-ready todo list application built with Next.js 14+ App Router, Convex backend, Better Auth authentication, Tailwind CSS, and shadcn/ui components.

## Features

- ✅ **Email/Password Authentication** - Secure user authentication with Better Auth
- ✅ **Task Management** - Create, complete, and delete tasks
- ✅ **Real-time Updates** - Live synchronization via Convex subscriptions
- ✅ **Rate Limiting** - Production-ready API protection
- ✅ **Clean UI** - Minimal, focused design with Tailwind CSS and shadcn/ui
- ✅ **Type-safe** - Full TypeScript coverage

## Architecture

This project follows the **Convex Four-Layer Architecture Pattern**:

```
convex/
├── schema.ts              # Database schema definitions
├── convex.config.ts       # Component configuration
├── auth.ts                # Better Auth setup
├── http.ts                # HTTP routes for auth
├── db/                    # Database Layer (CRUD operations)
│   ├── index.ts           # Barrel exports
│   └── tasks.ts           # Task database operations
├── endpoints/             # Endpoint Layer (business logic)
│   └── tasks.ts           # Task API endpoints
├── helpers/               # Helper Layer (utilities)
│   └── validation.ts      # Validation utilities
└── rateLimiter.ts         # Rate limiting configuration
```

### Key Principles

- **Database Layer (`convex/db/`)**: Only place where `ctx.db` is used directly
- **Endpoint Layer (`convex/endpoints/`)**: Business logic that composes database operations
- **Helper Layer (`convex/helpers/`)**: Pure utility functions with no database access

## Tech Stack

### Backend
- **[Convex](https://convex.dev)** - Backend-as-a-Service with real-time sync
- **[Better Auth](https://www.better-auth.com/)** - Authentication framework
- **[@convex-dev/better-auth](https://labs.convex.dev/auth/setup/better-auth)** - Better Auth integration for Convex
- **[@convex-dev/rate-limiter](https://labs.convex.dev/rate-limiter)** - Token bucket rate limiting

### Frontend
- **[Next.js 15](https://nextjs.org)** - React framework with App Router
- **[TypeScript](https://www.typescriptlang.org/)** - Type safety
- **[Tailwind CSS](https://tailwindcss.com/)** - Utility-first styling
- **[shadcn/ui](https://ui.shadcn.com/)** - Accessible component library
- **[Lucide Icons](https://lucide.dev/)** - Beautiful icon set

## Prerequisites

- **Node.js** 18+ and **pnpm** 8+
- **Convex account** (free tier available at [convex.dev](https://convex.dev))

## Getting Started

### 1. Install Dependencies

```bash
pnpm install
```

### 2. Set Up Convex

```bash
# Login to Convex (opens browser)
npx convex login

# Initialize Convex project
npx convex dev
```

This will:
- Create a Convex deployment
- Generate `CONVEX_DEPLOYMENT` and `NEXT_PUBLIC_CONVEX_URL`
- Install Better Auth and Rate Limiter components
- Start the Convex dev server

### 3. Configure Environment Variables

Copy the example environment file:

```bash
cp .env.local.example .env.local
```

Edit `.env.local` and fill in the values:

```bash
# These are auto-generated by `npx convex dev`
CONVEX_DEPLOYMENT=dev:your-deployment-name
NEXT_PUBLIC_CONVEX_URL=https://your-deployment.convex.cloud

# Generate with: openssl rand -base64 32
BETTER_AUTH_SECRET=your-generated-secret

# Local development URLs
SITE_URL=http://localhost:3000
NEXT_PUBLIC_SITE_URL=http://localhost:3000
```

**Generate Better Auth Secret:**
```bash
openssl rand -base64 32
```

### 4. Start Development Servers

```bash
# Start both Convex and Next.js
pnpm run dev
```

Or run them separately:

```bash
# Terminal 1: Convex backend
pnpm run convex:dev

# Terminal 2: Next.js frontend
pnpm run web:dev
```

The app will be available at **http://localhost:3000**

## Project Structure

```
simple-todo-app/
├── apps/
│   └── web/               # Next.js application
│       ├── app/           # App Router pages
│       ├── components/    # React components
│       ├── lib/           # Client utilities
│       └── providers/     # React context providers
├── convex/                # Convex backend
│   ├── schema.ts          # Database schema
│   ├── auth.ts            # Authentication config
│   ├── db/                # Database operations
│   ├── endpoints/         # API endpoints
│   └── helpers/           # Utility functions
├── packages/              # Shared packages (future)
├── .env.local.example     # Environment template
├── package.json           # Root dependencies
└── pnpm-workspace.yaml    # Monorepo config
```

## Component Configuration

### Better Auth Component

**Purpose:** Handles authentication with email/password, session management, and JWT tokens.

**Setup:**
- Pre-installed via `convex.config.ts`
- Configured in `convex/auth.ts`
- HTTP routes in `convex/http.ts`
- Client setup in `apps/web/lib/auth-client.ts`

**Features:**
- Email/password authentication
- 30-day session tokens
- Automatic session refresh
- Type-safe auth hooks

### Rate Limiter Component

**Purpose:** Prevents API abuse with token bucket rate limiting.

**Setup:**
- Pre-installed via `convex.config.ts`
- Configured in `convex/rateLimiter.ts`

**Limits:**
- **Create Task**: 10/minute (burst: 3)
- **Update Task**: 50/minute
- **Delete Task**: 30/minute

## Available Scripts

```bash
# Development
pnpm run dev          # Start Convex + Next.js
pnpm run web:dev      # Start Next.js only
pnpm run convex:dev   # Start Convex only

# Build
pnpm run build        # Build Next.js app

# Setup
pnpm run setup        # Install + initialize Convex

# Type checking
pnpm run typecheck    # Run TypeScript compiler
```

## Design System

This project uses the following design tokens from `theme.json`:

- **Primary**: `#6366f1` (Indigo)
- **Secondary**: `#0ea5e9` (Sky Blue)
- **Accent**: `#f97316` (Orange)
- **Font**: Inter Variable, Plus Jakarta Sans
- **Spacing**: Balanced density (4/8/12/20/28/40px scale)
- **Border Radius**: 4/8/12px (sm/md/lg)

## Next Steps

1. **Phase 2**: Implementation code generation
   - Database layer (`convex/db/tasks.ts`)
   - Endpoint layer (`convex/endpoints/tasks.ts`)
   - Helper layer (`convex/helpers/validation.ts`)

2. **Phase 3**: Frontend scaffolding
   - Next.js app structure
   - shadcn/ui components
   - Auth providers
   - Task management UI

## Learn More

- **[Convex Documentation](https://docs.convex.dev)** - Learn about Convex backend
- **[Better Auth Docs](https://www.better-auth.com/docs)** - Authentication setup
- **[Next.js Docs](https://nextjs.org/docs)** - Next.js App Router
- **[shadcn/ui](https://ui.shadcn.com/)** - Component library

## License

MIT
